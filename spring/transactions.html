<!DOCTYPE html>
<html lang="en">
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="author" content="RaviKalyan">
<title>Transactions</title>
<link rel="shortcut icon" type="image/x-icon"
	href="../scripts/images/tab_logo.png" />
<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
<link rel="stylesheet" href="../scripts/css/site.css">
<link
	href="https://fonts.googleapis.com/css2?family=Berkshire+Swash&family=Elsie+Swash+Caps:wght@400;900&family=Kalam:wght@300;400;700&family=Pacifico&family=Satisfy&display=swap"
	rel="stylesheet" />
<script>
		!function (theme, navWidth) {
			if (theme === 'dark') document.documentElement.classList.add('dark-theme')
			if (navWidth) document.documentElement.style.setProperty('--nav-width', `${navWidth}px`)
		}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'),
			localStorage && localStorage.getItem('nav-width'))
	</script>
<style>
@media screen and (min-width: 1025px) {
	.div-to-desk {
		display: none;
		/* Hide the div on screens smaller than 1025px (mobile) */
	}
}

@media screen and (max-width: 1025px) {
	.div-to-hide {
		display: none;
		/* Hide the div on screens smaller than 1025px (mobile) */
	}
}
</style>
</head>

<body>
	<nav class="navbar">
		<div class="navbar-brand">
			<a class="navbar-item" href="./home.html"> <img width="40"
				height="25" src="../scripts/images/nani1.png" alt="Home" />
			</a>
			<h4 class="div-to-desk, berkshire-swash-regular">Ravish</h4>
			<button class="navbar-burger" data-target="topbar-nav">
				<span></span> <span></span> <span></span>
			</button>
		</div>
		<div id="topbar-nav" class="navbar-menu">
			<div class="navbar-end">
				<div class="navbar-item" style="text-align: center;">
					<li class="nav-item" style="top: .2rem;"><a class="nav-link1"
						href="../home.html"><img height="25" width="25"
							src="../scripts/images/home.png"></i></a></li>
					<div class="navbar-item is-hoverable">
						<a class="navbar-link" href="../java/introduction.html">Java</a>
					</div>
					<div class="navbar-item is-hoverable">
						<a class="navbar-link" href="../spring/introduction.html">Spring</a>
					</div>
					<div class="navbar-item is-hoverable">
						<a class="navbar-link" href="../springboot/introduction.html">SpringBoot</a>
					</div>
					<div class="navbar-item is-hoverable">
						<a class="navbar-link" href="../java/java8.html">Java 8
							Features</a>
					</div>
					<div class="navbar-item is-hoverable">
						<a class="navbar-link" href="../DP/introduction.html">Design
							Patterns</a>
					</div>
					<div class="navbar-item is-hoverable">
						<a class="navbar-link"
							href="../interview/interview-questions.html">Interview
							Questions</a>
					</div>
					<label class="theme-toggler div-to-hide"> <input
						type="checkbox" id="switch-theme-checkbox" /> <span class="icon"></span>
					</label>
				</div>
			</div>
		</div>
		<label class="theme-toggler div-to-desk" style="top: 22px;"> <input
			type="checkbox" id="switch-theme-mobile" /> <span class="icon"></span>
		</label>
	</nav>

	<div class="body">
		<div class="nav-container">
			<aside class="nav">
				<div class="nav-panel-menu is-active" data-panel="menu">
					<li class="nav-item" data-depth="0">
						<ul class="nav-list">
							<h4>Spring Basic</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/introduction.html">Spring Introduction</a></li>
							<h4>Spring MVC</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/mvc.html">Spring MVC</a></li>
							<h4>Spring Exceptions</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/exceptions.html">Spring Exceptions</a></li>
							<h4>Spring Actuators</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/actuators.html">Spring Actuators</a></li>
							<h4>Spring Annotations</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/annotations-core.html">Core Annotations</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/annotations-mvc.html">MVC Annotations</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/annotations-transactions.html">Transactions
									& Error Annotations</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/annotations-configuration.html">Configuration
									Annotations</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/annotations-aop.html">AOP Annotations</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/annotations-jpa.html">JPA Annotations</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/annotations-cloud.html">Cloud Annotations</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/annotations-scheduling.html">Scheduling
									Annotations</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/annotations-cache-error.html">Caching
									Annotations</a></li>
							<h4>Spring AOP</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/aop.html">Spring AOP</a></li>
							<h4>Spring JPA</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/jpa.html">Spring JPA</a></li>
							<h4>Spring Transactions</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/transactions.html">Spring Transactions</a></li>
							<h4>Spring Async</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/async.html">Spring Async</a></li>
							<h4>Spring Batch</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/batch.html">Spring Batch</a></li>
							<h4>Spring Aspect</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/aspect.html">Spring Aspect</a></li>
							<h4>Spring Kafka</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/kafka.html">Spring Kafka</a></li>
							<h4>Spring Logging</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/logging.html">Spring Logging</a></li>
							<h4>Spring Security</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/security.html">Spring Security</a></li>
							<h4>Interview Questions</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
								href="../spring/spring-interview-questions.html">Spring
									Interview Questions</a></li>
						</ul>
					</li>
				</div>
			</aside>
		</div>
		<main class="article">
			<div class="toolbar">
				<button class="navbar-burger" id="nav-toggle-1">
					<span></span> <span></span> <span></span>
				</button>
				<nav class="breadcrumbs">
					<ul>
						<li><a href="../home.html">Home</a></li>
						<li><a href="../spring/introduction.html">Spring</a></li>
						<li><a href="../spring/introduction.html">Transactions</a></li>
					</ul>
				</nav>
			</div>
			<div class="doc">
				<nav class="breadcrumbs div-to-hide">
					<ul>
						<li><a href="../home.html">Home</a></li>
						<li><a href="../spring/introduction.html">Spring</a></li>
						<li><a href="../spring/introduction.html">Transactions</a></li>
					</ul>
					<hr>
				</nav>
				<a class="div-to-desk"> <br>
				</a>
				<article>
					<div class="entry-content" itemprop="text">
						<p>
							A database transaction is a sequence of actions that are treated
							as a single unit of work. These actions should either complete
							entirely or take no effect at all. Transaction management is an
							important part of RDBMS-oriented enterprise application to ensure
							data integrity and consistency. The concept of transactions can
							be described with the following four key properties described as
							<b>ACID</b>
						</p>
						<h4>1. ACID Properties</h4>
						<ul class="list">
							<li>
								<p>
									<b>Atomicity</b> − A transaction should be treated as a single
									unit of operation, which means either the entire sequence of
									operations is successful or unsuccessful.
								</p>
							</li>
							<li>
								<p>
									<b>Consistency</b> − This represents the consistency of the
									referential integrity of the database, unique primary keys in
									tables, etc.
								</p>
							</li>
							<li>
								<p>
									<b>Isolation</b> − There may be many transaction processing
									with the same data set at the same time. Each transaction
									should be isolated from others to prevent data corruption.
								</p>
							</li>
							<li>
								<p>
									<b>Durability</b> − Once a transaction has completed, the
									results of this transaction have to be made permanent and
									cannot be erased from the database due to system failure.
								</p>
							</li>
						</ul>
						<h4>2. Transaction Isolation Levels</h4>
						<p>Transaction isolation level is a concept that is not
							exclusive to the Spring framework. It is applied to transactions
							in general and is directly related with the ACID transaction
							properties. Isolation level defines how the changes made to some
							data repository by one transaction affect other simultaneous
							concurrent transactions, and also how and when that changed data
							becomes available to other transactions. When we define a
							transaction using the Spring framework we are also able to
							configure in which isolation level that same transaction will be
							executed.</p>
						<h4>Usage example</h4>
						<p>Using the @Transactional annotation we can define the
							isolation level of a Spring managed bean transactional method.
							This means that the transaction in which this method is executed
							will run with that isolation level:</p>
						<ul>
							<li style="text-align: justify"><strong>Dirty Read
									– </strong>A Dirty read is a situation when a transaction reads data
								that has not yet been committed. For example, Let’s say
								transaction 1 updates a row and leaves it uncommitted,
								meanwhile, Transaction 2 reads the updated row. If transaction 1
								rolls back the change, transaction 2 will have read data that is
								considered never to have existed.</li>
							<img src="../spring/images/dirty-read.jpg" alt="Dirty Read" />
							<li style="text-align: justify"><strong>Non
									Repeatable read – </strong>Non Repeatable read occurs when a transaction
								reads the same row twice and gets a different value each time.
								For example, suppose transaction T1 reads data. Due to
								concurrency, another transaction T2 updates the same data and
								commit, Now if transaction T1 rereads the same data, it will
								retrieve a different value.</li>
							<img src="../spring/images/non-repeatable.jpg"
								alt="Non Repeatable read" />
							<li style="text-align: justify"><strong>Phantom
									Read – </strong>Phantom Read occurs when two same queries are executed,
								but the rows retrieved by the two, are different. For example,
								suppose transaction T1 retrieves a set of rows that satisfy some
								search criteria. Now, Transaction T2 generates some new rows
								that match the search criteria for transaction T1. If
								transaction T1 re-executes the statement that reads the rows, it
								gets a different set of rows this time.</li>
							<img src="../spring/images/phantom-read.jpg" alt="Phantom Read" />
							<ul class="list">
								<li>
									<p>
										<b>ISOLATION_READ_UNCOMMITTED</b> − Allows to read changes
										that haven't yet been committed.It suffer from <b>Dirty
											reads, Nonrepeatable read and Phantom read.</b>
									</p>
								</li>
								<li>
									<p>
										<b>ISOLATION_READ_COMMITTED</b> − Allows reads from concurrent
										transactions that have been committed. It may suffer from <b>Nonrepeatable
											read and Phantom read</b> Because other transactions may be
										updating the data.
									</p>
								</li>
								<li>
									<p>
										<b>ISOLATION_REPEATABLE_READ</b> − Multiple reads of the same
										field will yield the same results untill it is changed by
										itself.It may suffer from <b>Phantom read</b> Because other
										transactions may be inserting the data.
									</p>
								</li>
								<li>
									<p>
										<b>ISOLATION_SERIALIZABLE</b> − SERIALIZABLE isolation level
										is the most restrictive of all isolation levels. Transactions
										are executed with locking at all levels (read, range and write
										locking) so they appear as if they were executed in a
										serialized way. This leads to a scenario where none of the
										issues mentioned above may occur, but in the other way we
										don't allow transaction concurrency and consequently introduce
										a performance penalty.
									</p>
								</li>
							</ul>
							<p>To summarize, the existing relationship between isolation
								level and read phenomena may be expressed in the following table
								:</p>
							<figure class="wp-block-table is-style-stripes">
								<table style="border: 1px solid #ccc; padding: 1px;">
									<tbody>
										<tr>
											<td style="border: 1px solid #ccc; padding: 5px;"><strong>Isolation
													Level</strong></td>
											<td style="border: 1px solid #ccc; padding: 5px;"><strong>Dirty
													Read</strong></td>
											<td style="border: 1px solid #ccc; padding: 5px;"><strong>Non
													Repeatable Read</strong></td>
											<td style="border: 1px solid #ccc; padding: 5px;"><strong>Phantom
													Read</strong></td>
										</tr>
										<tr>
											<td style="border: 1px solid #ccc; padding: 5px;">READ_UNCOMMITTED</td>
											<td style="border: 1px solid #ccc; padding: 5px;">Yes</td>
											<td style="border: 1px solid #ccc; padding: 5px;">Yes</td>
											<td style="border: 1px solid #ccc; padding: 5px;">Yes</td>
										</tr>
										<tr>
											<td style="border: 1px solid #ccc; padding: 5px;">READ_COMMITTED</td>
											<td style="border: 1px solid #ccc; padding: 5px;">No</td>
											<td style="border: 1px solid #ccc; padding: 5px;">Yes</td>
											<td style="border: 1px solid #ccc; padding: 5px;">Yes</td>
										</tr>
										<tr>
											<td style="border: 1px solid #ccc; padding: 5px;">REPEATABLE_READ</td>
											<td style="border: 1px solid #ccc; padding: 5px;">No</td>
											<td style="border: 1px solid #ccc; padding: 5px;">No</td>
											<td style="border: 1px solid #ccc; padding: 5px;">Yes</td>
										</tr>
										<tr>
											<td style="border: 1px solid #ccc; padding: 5px;">SERIALIZABLE</td>
											<td style="border: 1px solid #ccc; padding: 5px;">No</td>
											<td style="border: 1px solid #ccc; padding: 5px;">No</td>
											<td style="border: 1px solid #ccc; padding: 5px;">No</td>
										</tr>
									</tbody>
								</table>
							</figure>
						</ul>
						<h4>3. Transaction Propagation Levels</h4>
						<p>Propagation level in spring decides if the spring has to
							create a new transaction or the same transaction can be used to
							perform a database operation. Transaction Propagation Types:
							There are seven types of Transaction Propagation: REQUIRED is
							Default Transaction Propagation.</p>
						<ul>
							<li>REQUIRED</li>
							<li>REQUIRES_NEW</li>
							<li>NESTED</li>
							<li>SUPPORTS</li>
							<li>NOT_SUPPORTED</li>
							<li>NEVER</li>
							<li>MANDATORY</li>
						</ul>
						<p>
							<strong>1. REQUIRED</strong> Spring REQUIRED behavior means that
							the same transaction will be used if there is an already opened
							transaction in the current bean method execution context. If
							there is no existing transaction the Spring container will create
							a new one. If multiple methods configured as REQUIRED behavior
							are called in a nested way they will be assigned distinct logical
							transactions but they will all share the same physical
							transaction. In short this means that if an inner method causes a
							transaction to rollback, the outer method will fail to commit and
							will also rollback the transaction.
						</p>
						<p>Note that the inner method throws a RuntimeException and is
							annotated with REQUIRED behavior. This means that it will use the
							same transaction as the outer bean, so the outer transaction will
							fail to commit and will also rollback.</p>
						<p>
							<b>Note: </b>The only exceptions that set a transaction to
							rollback state by default are the unchecked exceptions
							(likeRuntimeException). If you want checked exceptions to also
							set transactions to rollback you must configure them to do so.

						</p>
						<p>
							<strong>2. REQUIRES_NEW</strong> behavior means that a new
							physical transaction will always be created by the container. In
							other words the inner transaction may commit or rollback
							independently of the outer transaction, i.e. the outer
							transaction will not be affected by the inner transaction result:
							they will run in <strong>distinct physical transactions</strong>.
						</p>
						<p>The inner method is annotated with REQUIRES_NEW and throws
							a RuntimeException so it will set its transaction to rollback but
							will not affect the outer transaction. The outer transaction is
							paused when the inner transaction starts and then resumes after
							the inner transaction is Concluded. They run independently of
							each other so the outer transaction may commit successfully.</p>
						<p>
							<strong>3. NESTED</strong> The NESTED behavior makes nested
							Spring transactions to use the same physical transaction but sets
							savepoints between nested invocations so inner transactions may
							also rollback independently of outer transactions. This may be
							familiar to JDBC aware developers as the savepoints are achieved
							with JDBC savepoints, so this behavior should only be used with
							Spring JDBC managed transactions.

						</p>
						<p>
							<strong>4. SUPPORTS</strong> The SUPPORTS behavior will execute
							in the scope of a transaction if an opened transaction already
							exists. If there isn't an already opened transaction the method
							will execute anyway but in a non-transactional way.
						</p>
						<p>
							<strong>5. NOT_SUPPORTED </strong> The NOT_SUPPORTED behavior The
							NOT_SUPPORTED behavior will execute outside of the scope of any
							transaction. If an opened transaction already exists it will be
							paused.
						</p>
						<p>
							<strong>6. NEVER </strong> The NEVER behavior states that an
							existing opened transaction must not already exist. If a
							transaction exists an exception will be thrown by the container.
						</p>
						<p>
							<strong>7. MANDATORY </strong> The MANDATORY behavior states that
							an existing opened transaction must already exist. If not an
							exception will be thrown by the container.
						</p>
						<table style="border: 1px solid #ccc; padding: 1px; width: 100%;">
							<tbody style="border: 1px solid #ccc;">
								<tr>
									<th style="border: 1px solid #ccc; padding: 5px;">Propagation</th>
									<th style="border: 1px solid #ccc; padding: 5px;">Behaviour</th>
								</tr>
								<tr>
									<td style="border: 1px solid #ccc; padding: 5px;"><b>REQUIRED</b></td>
									<td style="border: 1px solid #ccc; padding: 5px;"><b>Always
											executes in a transaction.</b> If there is any existing
										transaction it uses it. If none exists then only a new one is
										created</td>
								</tr>
								<tr>
									<td style="border: 1px solid #ccc; padding: 5px;"><b>SUPPORTS</b></td>
									<td style="border: 1px solid #ccc; padding: 5px;"><b>It
											may or may not run in a transaction.</b> If current transaction
										exists then it is supported. If none exists then gets executed
										with out transaction.</td>
								</tr>
								<tr>
									<td style="border: 1px solid #ccc; padding: 5px;"><b>NOT_SUPPORTED</b></td>
									<td style="border: 1px solid #ccc; padding: 5px;"><b>Always
											executes without a transaction.</b> If there is any existing
										transaction it gets suspended</td>
								</tr>
								<tr>
									<td style="border: 1px solid #ccc; padding: 5px;"><b>REQUIRES_NEW</b></td>
									<td style="border: 1px solid #ccc; padding: 5px;"><b>Always
											executes in a new transaction.</b> If there is any existing
										transaction it gets suspended</td>
								</tr>
								<tr>
									<td style="border: 1px solid #ccc; padding: 5px;"><b>NEVER</b></td>
									<td style="border: 1px solid #ccc; padding: 5px;"><b>Always
											executes with out any transaction.</b> It throws an exception if
										there is an existing transaction</td>
								</tr>
								<tr>
									<td style="border: 1px solid #ccc; padding: 5px;"><b>MANDATORY</b></td>
									<td style="border: 1px solid #ccc; padding: 5px;"><b>Always
											executes in a transaction.</b> If there is any existing
										transaction it is used. If there is no existing transaction it
										will throw an exception.</td>
								</tr>
							</tbody>
						</table>
					</div>
				</article>
			</div>
			<div class="card-footer">
				<ul class="pagination justify-content-center mb-4">
					<li class="page-item"><a class="page-link btn-outline-primary"
						href="../spring/jpa.html">&lArr; Previous</a></li>
					<li class="page-item"><a class="page-link"
						href="../spring/async.html">Next &rArr;</a></li>
				</ul>
			</div>
			<button onclick="topFunction()" id="myBtn" title="Go to top">
				<img height="30" width="30" src="../scripts/images/top.jpeg" />
			</button>
		</main>
	</div>
	<script>
		window.addEventListener('DOMContentLoaded', () => {
			window.scrollTo(0, 0);
		})
	</script>
	<script>
		// Get the button
		let mybutton = document.getElementById("myBtn");

		// When the user scrolls down 20px from the top of the document, show the button
		window.onscroll = function () {scrollFunction()};

		function scrollFunction() {
			if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
				mybutton.style.display = "block";
			} else {
				mybutton.style.display = "none";
			}
		}
		// When the user clicks on the button, scroll to the top of the document
		function topFunction() {
			document.body.scrollTop = 0;
			document.documentElement.scrollTop = 0;
		}
	</script>
	<script src="../scripts/js/site.js"></script>
</body>
<footer class="footer">
	<p>
		©
		<script>var d = new Date();
			document.write(d.getFullYear());</script>
		, The content is copyrighted to Ravi Kalyan Kolloju.
	</p>
</footer>

</html>