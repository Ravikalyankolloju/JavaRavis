<!DOCTYPE html>
<html lang="en">
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="RaviKalyan">
	<title>Circuit Breaker</title>
	<link rel="shortcut icon" type="image/x-icon" href="../scripts/images/tab_logo.png" />
	<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
	<link rel="stylesheet" href="../scripts/css/site.css">
	<script>
		!function (theme, navWidth) {
			if (theme === 'dark') document.documentElement.classList.add('dark-theme')
			if (navWidth) document.documentElement.style.setProperty('--nav-width', `${navWidth}px`)
		}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'),
			localStorage && localStorage.getItem('nav-width'))
	</script>
	<style>
		@media screen and (min-width: 1025px) {
			.div-to-desk {
				display: none;
				/* Hide the div on screens smaller than 1025px (mobile) */
			}
		}

		@media screen and (max-width: 1025px) {
			.div-to-hide {
				display: none;
				/* Hide the div on screens smaller than 1025px (mobile) */
			}
		}
	</style>
</head>

<body>
	<nav class="navbar">
		<div class="navbar-brand">
			<a class="navbar-item" href="../home.html"> <img width="40"
				height="25" src="../scripts/images/nani1.png" alt="Home" />
			</a>
			<h4 class="div-to-desk, berkshire-swash-regular">Ravish</h4>
			<button class="navbar-burger" data-target="topbar-nav">
				<span></span> <span></span> <span></span>
			</button>
		</div>
		<div id="topbar-nav" class="navbar-menu">
			<div class="navbar-end">
				<div class="navbar-item" style="text-align: center;">
					<li class="nav-item" style="top: .2rem;"><a class="nav-link1" href="../home.html"><img height="25"
								width="25" src="../scripts/images/home.png"></i></a>
					</li>
					<div class="navbar-item is-hoverable">
						<a class="navbar-link" href="../java/introduction.html">Java</a>
					</div>
					<div class="navbar-item is-hoverable">
						<a class="navbar-link" href="../spring/introduction.html">Spring</a>
					</div>
					<div class="navbar-item is-hoverable">
						<a class="navbar-link" href="../springboot/introduction.html">SpringBoot</a>
					</div>
					<div class="navbar-item is-hoverable">
						<a class="navbar-link" href="../interview/java/java8/introduction.html">Java 8 Features</a>
					</div>
					<div class="navbar-item is-hoverable">
						<a class="navbar-link" href="../DP/introduction.html">Design Patterns</a>
					</div>
					<div class="navbar-item is-hoverable">
						<a class="navbar-link" href="../interview/interview-questions.html">Interview Questions</a>
					</div>
					<label class="theme-toggler div-to-hide">
						<input type="checkbox" id="switch-theme-checkbox" />
						<span class="icon"></span>
					</label>
				</div>
			</div>
		</div>
		<label class="theme-toggler div-to-desk" style="top: 22px;">
			<input type="checkbox" id="switch-theme-mobile" />
			<span class="icon"></span>
		</label>
	</nav>

	<div class="body">
		<div class="nav-container">
			<aside class="nav">
				<div class="nav-panel-menu is-active" data-panel="menu">
					<li class="nav-item" data-depth="0">
						<ul class="nav-list">
							<h4>Springboot</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/introduction.html">Introduction</a></li>
							<h4>Microservice</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/ms-intro.html">Introduction</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/ms-architecture.html">Microservices Architecture</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/registry-discovery.html">Service Registry and Discovery</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/config-server.html">Config Server</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/api-gateway.html">API Gateway</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link" href="../springboot/zuul.html">Zuul
									Gateway</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/circuit-breaker.html">Circuit Breaker</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/resilience4j.html">Resilience4j</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/web-client.html">WebClient</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/resttemplate.html">RestTemplate</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/open-feign.html">Feign Client</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/sleuth.html">Zipkin and Sleuth</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/security.html">Cloud Security</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link" href="../springboot/saga.html">Saga
									Pattern</a></li>
							<h4>Interview Questions</h4>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/springboot-interview-questions.html">Springboot Interview
									Questions
								</a></li>
							<li class="nav-item" data-depth="1"><a class="nav-link"
									href="../springboot/microservices-interview.html">Microservices Interview
									Questions</a></li>
						</ul>
					</li>
				</div>
			</aside>
		</div>
		<main class="article">
			<div class="toolbar">
				<button class="navbar-burger" id="nav-toggle-1">
					<span></span>
					<span></span>
					<span></span>
				</button>
				<nav class="breadcrumbs">
					<ul>
						<li><a href="../home.html">Home</a></li>
						<li><a href="../springboot/ms-intro.html">Microservices</a></li>
						<li><a href="../springboot/circuit-breaker.html">Circuit Breaker</a></li>
					</ul>
				</nav>
			</div>
			<div class="doc">
				<nav class="breadcrumbs div-to-hide">
					<ul>
						<li><a href="../home.html">Home</a></li>
						<li><a href="../springboot/ms-intro.html">Microservices</a></li>
						<li><a href="../springboot/circuit-breaker.html">Circuit Breaker</a></li>
					</ul>
					
				</nav>
				<a class="div-to-desk">
					<br>
				</a>
				<article>
					<div class="entry-content" itemprop="text">
						<h1>1. Introduction to Circuit Breaker Hystrix</h1>
						<p>Hystrix is a fault tolerance library developed by Netflix, designed to bring resilience and
							responsiveness to distributed systems. In Spring Boot, it integrates seamlessly with your
							microservices, providing protection against failures and unexpected delays.</p>
						<p>Hystrix operates around the concept of circuit breakers, which act as protective switches for
							your service calls. Imagine a faulty service being bombarded with requests, further
							worsening its performance. Hystrix intervenes by tripping the circuit breaker, preventing
							further calls to the failing service and allowing it to recover.</p>
						<h1>2. Why Use Hystrix?</h1>
						<p>These services are prone to failure or delayed responses. If a service fails it may impact on
							other services affecting performance and possibly making other parts of application
							inaccessible or in the worst case bring down the whole application.</p>
						<p>Here are some key reasons to consider using Hystrix in your Spring Boot microservices:</p>
						<ul data-sourcepos="13:1-14:112"><span>
							</span>
							<li data-sourcepos="13:1-13:189"><strong>Fault Tolerance:</strong><span> Hystrix protects
									your system from cascading failures.</span><span> When a service experiences
									issues,</span><span> Hystrix isolates it to prevent the problems from spreading to
									other services.</span></li><span>
							</span>
							<li data-sourcepos="14:1-14:112"><strong>Latency Management:</strong><span> Hystrix helps
									avoid slow,</span><span> unresponsive services.</span><span> It can fall back to
									alternate methods or graceful degradation when response times exceed
									thresholds.</span></li><span>
							</span>
							<li data-sourcepos="15:1-15:209"><strong>Increased Availability:</strong><span> Hystrix
									ensures your entire application remains available even if some services encounter
									temporary issues.</span><span> Users experience minimal disruption while the failing
									service recovers.</span></li><span>
							</span>
							<li data-sourcepos="16:1-17:0"><strong>Improved Developer Experience:</strong><span> Hystrix
									simplifies handling service failures.</span><span> Its dashboard provides real-time
									monitoring and insights into service health,</span><span> enabling you to quickly
									identify and troubleshoot problems.</span></li><span>
							</span>
						</ul>
						<h1>3. When to Use Hystrix</h1>
						<p>The Hystrix framework library helps to control the interaction between services by providing
							fault tolerance and latency tolerance. It improves overall resilience of the system by
							isolating the failing services and stopping the cascading effect of failures.</p>
						<strong>Service unavailable</strong> − The service which is being called is down for some
						reason, for
						example − bug, deployment, etc.</p>
						<p>
							<strong>Service taking time to respond</strong> − The service which is being called can
							be slow due to
							high load or resource consumption or it is in the middle of initializing the services.
						</p>
						<p><strong>Netflix Hystrix, Resilince4j</strong> are two well-known circuit breakers which are
							used to handle
							such situations. In this tutorial, we will use Hystrix.</p>
						<p>Hystrix is not a one-size-fits-all solution. Consider using it in these scenarios:</p>
						<ul data-sourcepos="22:1-24:26"><span>
							</span>
							<li data-sourcepos="22:1-22:184"><strong>Communication with external
									services:</strong><span> When relying on third-party APIs or services you don't
									directly control,</span><span> Hystrix can protect your application from their
									potential failures.</span></li><span>
							</span>
							<li data-sourcepos="23:1-23:232"><strong>Services with high call volume or critical
									functionality:</strong><span> For services constantly bombarded with requests or
									those crucial for your application's core functionality,</span><span> Hystrix
									provides additional reliability and fault tolerance.</span></li><span>
							</span>
							<li data-sourcepos="24:1-24:26"><strong>Microservices prone to intermittent
									issues:</strong><span> If your services occasionally experience latency or
									temporary
									breakdowns,</span><span> Hystrix can handle graceful degradation and prevent
									cascading failures.</span></li><span>
							</span>
						</ul>
						<h1>4. Implementing Circuit Breaker with Hystrix</h1>
						<h4>1. Add Hystrix dependency:</h4>
						<pre class="nz oa ob oc od oe of og bo oh ba bj"><span class="hljs-tag"><span class="citation-0">&lt;</span><span class="hljs-name"><span class="citation-0">dependency</span></span><span class="citation-0">&gt;</span></span><br><span class="hljs-tag"><span class="citation-0">&lt;</span><span class="hljs-name"><span class="citation-0">groupId</span></span><span class="citation-0">&gt;</span></span><span class="citation-0">org.springframework.cloud</span><span class="hljs-tag"><span class="citation-0">&lt;/</span><span class="hljs-name"><span class="citation-0">groupId</span></span><span class="citation-0">&gt;</span></span><br><span class="hljs-tag"><span class="citation-0">&lt;</span><span class="hljs-name"><span class="citation-0">artifactId</span></span><span class="citation-0">&gt;</span></span><span class="citation-0">spring-cloud-starter-netflix-hystrix</span><span class="hljs-tag"><span class="citation-0">&lt;/</span><span class="hljs-name"><span class="citation-0">artifactId</span></span><span class="citation-0">&gt;</span></span><br><span class="hljs-tag"><span class="citation-0">&lt;/</span><span class="hljs-name"><span class="citation-0">dependency</span></span><span class="citation-0">&gt;</span></span><span class="citation-0 citation-end-0"></span>
</code></pre>
						<h4>2. Enable Hystrix:</h4>
						<pre class="nz oa ob oc od oe of og bo oh ba bj"><code _ngcontent-ng-c1279875957="" role="text" class="code-container"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@EnableHystrix</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">YourApplicationClass</span> </span>{
    <span class="hljs-comment">// ...</span>
}
</code></pre>
						<p><strong>@EnableHystrix</strong> − This annotation scans our packages and looks out for
							methods which are
							using <strong>@HystrixCommand</strong> annotation.</p>
						<h4>3. Apply Hystrix to a method:</h4>
						<pre class="nz oa ob oc od oe of og bo oh ba bj"><code _ngcontent-ng-c1279875957="" role="text" class="code-container"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyService</span> </span>{

    <span class="hljs-meta">@HystrixCommand(fallbackMethod = "reliable")</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">callExternalService</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// Call a potentially unreliable external service</span>
        <span class="hljs-keyword">return</span> externalService.doSomething();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">reliable</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// Fallback method in case of failure</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"External service is down, using fallback"</span>;
    }
}
</code></pre>
						<h4>4. Customize Hystrix behavior (optional):</h4>
						<pre class="nz oa ob oc od oe of og bo oh ba bj"><code _ngcontent-ng-c1279875957="" role="text" class="code-container"><span class="hljs-meta">@<span class="citation-1 citation-end-1">HystrixCommand(fallbackMethod = "reliable",
                commandProperties = {
                    @HystrixProperty(name = "execution.isolation.thread.timeoutInMilliseconds",</span> value = "5000")
                })</span>
</code></pre>
						<p>Now, let us understand couple of points from the above code −</p>
						<p><strong>HystrixCommand annotation</strong> − This is responsible for wrapping the function
							call that is
							callExternalService and provide a proxy around it. The proxy then gives various hooks through
							which we can control our call to the doSomething service. For example, timing out the
							request,pooling of request, providing a fallback method, etc.</p>

						<p><strong>Fallback method</strong> − We can specify the method we want to call when Hystrix
							determines that
							something is wrong with the caller. This method needs to have same signature as the method
							which is annotated. In our case, we have decided to provide the data back to our controller.</p>
						<p>Couple of useful options this annotation provides −</p>
						<p><strong>Error threshold percent</strong> − Percentage of request allowed to fail before the
							circuit is
							tripped, that is, fallback methods are called. This can be controlled by using
							cicutiBreaker.errorThresholdPercentage</p>

						<p><strong>Giving up on the network request after timeout</strong> − If the callee service, in
							our case Customer
							service, is slow, we can set the timeout after which we will drop the request and move to
							fallback method. This is controlled by setting
							execution.isolation.thread.timeoutInMilliseconds.</p>
							<h4>Key Points</h4>
						<ul><span>
							</span>
							<li><strong>@HystrixCommand</strong><span> annotates a
									method to wrap it with a circuit breaker.</span></li>
							<li><strong>fallbackMethod</strong><span> specifies a
									method to execute if the primary method fails.</span></li>
							<li><strong>commandProperties</strong><span> customize
									Hystrix behavior (e.</span><span>g.,</span><span> timeouts,</span><span> error
									thresholds).</span></li>
							<li><strong>Hystrix dashboard</strong>
									(http:</span><span>//localhost:</span><span>8080/hystrix) provides monitoring and
									insights.</li><span>
							</span>
						</ul>
					</div>
				</article>
			</div>
			<div class="card-footer">
				<ul class="pagination justify-content-center mb-4">
					<li class="page-item"><a class="page-link btn-outline-primary" href="../springboot/zuul.html">&lArr;
							Previous</a></li>
					<li class="page-item"><a class="page-link" href="../springboot/resilience4j.html">Next
							&rArr;</a></li>
				</ul>
			</div>
			<button onclick="topFunction()" id="myBtn" title="Go to top"><img height="30" width="30"
					src="../scripts/images/top.jpeg" /></button>
		</main>
	</div>
	<script>
		window.addEventListener('DOMContentLoaded', () => {
			window.scrollTo(0, 0);
		})
	</script>
	<script>
		// Get the button
		let mybutton = document.getElementById("myBtn");

		// When the user scrolls down 20px from the top of the document, show the button
		window.onscroll = function () {scrollFunction()};

		function scrollFunction() {
			if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
				mybutton.style.display = "block";
			} else {
				mybutton.style.display = "none";
			}
		}
		// When the user clicks on the button, scroll to the top of the document
		function topFunction() {
			document.body.scrollTop = 0;
			document.documentElement.scrollTop = 0;
		}
	</script>
	<script src="../scripts/js/site.js"></script>
</body>
<footer class="footer">
	<p>©
		<script>var d = new Date();
			document.write(d.getFullYear());</script>, The content is copyrighted to Ravi
		Kalyan Kolloju.
	</p>
</footer>

</html>